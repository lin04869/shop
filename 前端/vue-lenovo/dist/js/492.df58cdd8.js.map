{"version":3,"file":"js/492.df58cdd8.js","mappings":"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","sources":["webpack://lenovo_shopping/./src/views/manager/Home.vue","webpack://lenovo_shopping/src/views/manager/Home.vue","webpack://lenovo_shopping/./src/views/manager/Home.vue?893e","webpack://lenovo_shopping/./src/views/manager/Home.vue?5d1e"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"card\",staticStyle:{\"padding\":\"15px\"}},[_vm._v(\" 您好，\"+_vm._s(_vm.user?.name)+\"！欢迎使用联想后台管理系统！ \")]),_c('div',{staticStyle:{\"display\":\"flex\",\"margin\":\"10px 0\"}},[_c('div',{staticClass:\"card\",staticStyle:{\"width\":\"50%\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"space-between\",\"margin-bottom\":\"30px\"}},[_c('div',{staticStyle:{\"font-size\":\"20px\",\"font-weight\":\"bold\"}},[_vm._v(\"公告列表 \"),_c('span',{staticStyle:{\"font-size\":\"12px\",\"color\":\"#888\",\"margin-left\":\"8px\"}},[_vm._v(\"(\"+_vm._s(_vm.notices.length)+\")\")])]),_c('div',[(_vm.user && (_vm.user.role === 'ADMIN' || _vm.user.role === 'BUSINESS'))?_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":_vm.openAddNotice}},[_vm._v(\"新增公告\")]):_vm._e()],1)]),_c('div',[_c('el-timeline',{attrs:{\"slot\":\"reference\",\"reverse\":\"\"},slot:\"reference\"},[(_vm.notices && _vm.notices.length)?_vm._l((_vm.notices),function(item){return _c('el-timeline-item',{key:item.id,attrs:{\"timestamp\":item.time}},[_c('el-popover',{attrs:{\"placement\":\"right\",\"width\":\"260\",\"trigger\":\"hover\"}},[_c('div',{staticStyle:{\"font-weight\":\"600\"}},[_vm._v(_vm._s(item.title))]),_c('div',{staticStyle:{\"margin-top\":\"6px\"}},[_vm._v(_vm._s(item.content))]),_c('div',{staticStyle:{\"margin-top\":\"8px\",\"color\":\"#888\",\"font-size\":\"12px\"}},[_vm._v(\"发布者：\"+_vm._s(item.user)+\"    发布时间：\"+_vm._s(item.time))]),_c('span',{attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_vm._v(_vm._s(item.title))])])],1)}):[_c('div',{staticStyle:{\"color\":\"#999\",\"padding\":\"12px\"}},[_vm._v(\"暂无公告\")])]],2)],1)])]),_c('el-dialog',{attrs:{\"title\":\"新增公告\",\"visible\":_vm.showAddNotice,\"width\":\"520px\",\"close-on-click-modal\":false,\"destroy-on-close\":\"\"},on:{\"update:visible\":function($event){_vm.showAddNotice=$event}}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\",\"prop\":\"title\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.addForm.title),callback:function ($$v) {_vm.$set(_vm.addForm, \"title\", $$v)},expression:\"addForm.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"内容\",\"prop\":\"content\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":6,\"autocomplete\":\"off\"},model:{value:(_vm.addForm.content),callback:function ($$v) {_vm.$set(_vm.addForm, \"content\", $$v)},expression:\"addForm.content\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showAddNotice = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitAddNotice}},[_vm._v(\"保存\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"card\" style=\"padding: 15px\">\r\n      您好，{{ user?.name }}！欢迎使用联想后台管理系统！\r\n    </div>\r\n\r\n    <div style=\"display: flex; margin: 10px 0\">\r\n      <div style=\"width: 50%;\" class=\"card\">\r\n        <div style=\"display:flex; align-items:center; justify-content:space-between; margin-bottom: 30px;\">\r\n          <div style=\"font-size:20px; font-weight:bold\">公告列表 <span style=\"font-size:12px;color:#888;margin-left:8px\">({{notices.length}})</span></div>\r\n          <div>\r\n            <!-- 显示新增按钮（管理员/商家都可见），用于直接在首页新增公告 -->\r\n            <el-button type=\"primary\" plain size=\"small\" @click=\"openAddNotice\" v-if=\"user && (user.role === 'ADMIN' || user.role === 'BUSINESS')\">新增公告</el-button>\r\n          </div>\r\n        </div>\r\n        <div >\r\n          <el-timeline  reverse slot=\"reference\">\r\n            <template v-if=\"notices && notices.length\">\r\n              <el-timeline-item v-for=\"item in notices\" :key=\"item.id\" :timestamp=\"item.time\">\r\n              <el-popover\r\n                  placement=\"right\"\r\n                  width=\"260\"\r\n                  trigger=\"hover\">\r\n                <div style=\"font-weight:600\">{{ item.title }}</div>\r\n                <div style=\"margin-top:6px\">{{ item.content }}</div>\r\n                <div style=\"margin-top:8px; color:#888; font-size:12px\">发布者：{{ item.user }} &nbsp;&nbsp; 发布时间：{{ item.time }}</div>\r\n                <span slot=\"reference\">{{ item.title }}</span>\r\n              </el-popover>\r\n              </el-timeline-item>\r\n            </template>\r\n            <template v-else>\r\n              <div style=\"color:#999; padding:12px\">暂无公告</div>\r\n            </template>\r\n          </el-timeline>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 新增公告弹窗 -->\r\n    <el-dialog title=\"新增公告\" :visible.sync=\"showAddNotice\" width=\"520px\" :close-on-click-modal=\"false\" destroy-on-close>\r\n      <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"80px\">\r\n        <el-form-item label=\"标题\" prop=\"title\">\r\n          <el-input v-model=\"addForm.title\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"内容\" prop=\"content\">\r\n          <el-input type=\"textarea\" :rows=\"6\" v-model=\"addForm.content\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"showAddNotice = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitAddNotice\">保存</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'Home',\r\n  data() {\r\n    return {\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n      notices: [],\r\n      showAddNotice: false,\r\n      addForm: {\r\n        title: '',\r\n        content: ''\r\n      },\r\n      addFormRules:{\r\n        title: [{required:true, message:'请输入标题', trigger:'blur'}],\r\n        content: [{required:true, message:'请输入内容', trigger:'blur'}]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.$request.get('/notice/selectAll').then(res => {\r\n      this.notices = res.data || []\r\n    })\r\n  }\r\n  ,\r\n  methods: {\r\n    openAddNotice(){\r\n      this.addForm = {title:'', content:''}\r\n      this.showAddNotice = true\r\n    },\r\n    submitAddNotice(){\r\n      this.$refs.addFormRef.validate((valid)=>{\r\n        if(!valid) return;\r\n        this.$request.post('/notice/add', this.addForm).then(res=>{\r\n            if(res.code === '200'){\r\n            this.$message.success('公告新增成功')\r\n            this.showAddNotice = false\r\n            // 重新加载公告\r\n            this.$request.get('/notice/selectAll').then(r=>{ \r\n              this.notices = r.data || [] \r\n              // 通知其它页面刷新（如前端首页）\r\n              try{ localStorage.setItem('noticeUpdate', Date.now()) }catch(e){}\r\n            })\r\n          } else {\r\n            this.$message.error(res.msg || '新增失败')\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=8ef09812\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","_v","_s","user","name","notices","length","role","_e","attrs","on","openAddNotice","slot","_l","item","key","id","time","title","content","showAddNotice","$event","ref","addForm","addFormRules","model","value","callback","$$v","$set","expression","submitAddNotice","staticRenderFns","data","JSON","parse","localStorage","getItem","required","message","trigger","created","$request","get","then","res","methods","$refs","addFormRef","validate","valid","post","code","$message","success","r","setItem","Date","now","e","error","msg","component"],"sourceRoot":""}