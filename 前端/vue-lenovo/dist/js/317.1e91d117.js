"use strict";(self["webpackChunklenovo_shopping"]=self["webpackChunklenovo_shopping"]||[]).push([[317],{317:function(t,e,i){i.r(e),i.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{width:"100%","background-color":"white","margin-bottom":"50px"}},[e("div",{staticStyle:{margin:"0",padding:"0",height:"0"}}),e("div",{staticStyle:{margin:"0 25px"}},[e("div",{staticStyle:{flex:"5","margin-top":"0px"}},[e("div",[e("el-carousel",{staticStyle:{"border-radius":"10px"},attrs:{height:"400px"}},t._l(t.carousel_top,(function(t,i){return e("el-carousel-item",{key:i},[e("img",{staticStyle:{width:"100%",height:"400px","border-radius":"10px"},attrs:{src:t,alt:""}})])})),1)],1)]),e("div",{staticStyle:{"margin-top":"0","padding-top":"0"}},[e("div",{staticClass:"section-title",staticStyle:{"margin-bottom":"6px","font-weight":"600"}},[t._v("公告")]),t.notice&&t.notice.length?e("div",t._l(t.notice.slice(0,3),(function(i,s){return e("el-card",{key:i.id,staticStyle:{"margin-bottom":"6px"},attrs:{shadow:"never","body-style":{padding:"12px"}}},[e("div",{staticStyle:{display:"flex","flex-direction":"column"}},[e("div",{staticStyle:{"font-weight":"600","font-size":"18px"}},[t._v(t._s(i.title||i.content))]),e("div",{staticStyle:{color:"#888","font-size":"12px","margin-top":"4px"}},[t._v("发布者："+t._s(i.user)+"  ·  "+t._s(i.time))])])])})),1):e("div",{staticStyle:{color:"#999","font-size":"12px"}},[t._v("暂无公告")])]),t._m(0),e("div",{staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"space-between","margin-top":"16px",padding:"10px 6px"}},t._l(t.orderedTypeData,(function(i,s){return e("div",{key:s,staticClass:"type-item",on:{click:function(e){return t.navTo("/front/type?id="+i.id)}}},[e("img",{attrs:{src:i.img,alt:""}}),e("div",[t._v(t._s(i.name))])])})),0),e("div",{staticStyle:{"margin-top":"20px"}},[e("div",{staticClass:"section-title",staticStyle:{"margin-top":"0"}},[t._v("随机推荐")]),e("div",{staticStyle:{margin:"10px 5px 40px 5px"}},[e("el-row",t._l(t.shuffledGoods,(function(i,s){return e("el-col",{key:s,attrs:{span:5}},[e("img",{staticClass:"goods-img",attrs:{src:i.img,alt:""},on:{click:function(e){return t.navTo("/front/detail?id="+i.id)}}}),e("div",{staticClass:"goods-name"},[t._v(t._s(i.name))]),e("div",{staticClass:"goods-price"},[t._v("￥ "+t._s(i.price))])])})),1)],1)])]),e("div",{staticClass:"white-block"})])])])},o=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"10px"}},[e("div",{staticClass:"section-title",staticStyle:{"margin-top":"0"}},[t._v("商品分类")])])}],a={data(){return{user:JSON.parse(localStorage.getItem("xm-user")||"{}"),typeData:[],top:null,notice:[],goodsData:[],recommendData:[],carousel_top:[i(5810),i(5069),i(4144),i(5795)]}},mounted(){this.loadType(),this.loadNotice(),this.loadGoods(),this.__noticeUpdateHandler=t=>{"noticeUpdate"===t.key&&this.loadNotice()},window.addEventListener("storage",this.__noticeUpdateHandler)},beforeDestroy(){this.__noticeUpdateHandler&&window.removeEventListener("storage",this.__noticeUpdateHandler)},methods:{loadRecommend(){this.$request.get("/goods/recommend").then((t=>{"200"===t.code?this.recommendData=t.data:this.$message.error(t.msg)}))},loadType(){this.$request.get("/type/selectAll").then((t=>{"200"===t.code?this.typeData=t.data:this.$message.error(t.msg)}))},loadNotice(){this.$request.get("/notice/selectAll").then((t=>{this.notice=t.data;let e=0;this.notice&&this.notice.length&&(this.top=this.notice[0].content,setInterval((()=>{this.top=this.notice[e].content,e++,e===this.notice.length&&(e=0)}),2500))}))},loadGoods(){this.$request.get("/goods/selectTop15").then((t=>{"200"===t.code?this.goodsData=t.data:this.$message.error(t.msg)}))},navTo(t){location.href=t}},computed:{shuffledGoods(){if(!this.goodsData||!this.goodsData.length)return[];const t=this.goodsData.slice();for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t.slice(0,15)},orderedTypeData(){if(!this.typeData||!this.typeData.length)return[];const t=["小新","拯救者","think","yoga","其他"];return(this.typeData||[]).slice().sort(((e,i)=>{const s=(e.name||"").toLowerCase(),o=(i.name||"").toLowerCase(),a=t.findIndex((t=>s.includes(t.toLowerCase()))),n=t.findIndex((t=>o.includes(t.toLowerCase()))),r=-1===a?t.length:a,l=-1===n?t.length:n;return r!==l?r-l:s.localeCompare(o)}))}}},n=a,r=i(1656),l=(0,r.A)(n,s,o,!1,null,"48748ac1",null),c=l.exports},4144:function(t,e,i){t.exports=i.p+"img/Carousel3.1681bb81.jpg"},5069:function(t,e,i){t.exports=i.p+"img/Carousel2.b5a1a334.jpg"},5795:function(t,e,i){t.exports=i.p+"img/Carousel4.70d812ab.jpg"},5810:function(t,e,i){t.exports=i.p+"img/Carousel1.63c4b6ce.jpg"}}]);
//# sourceMappingURL=317.1e91d117.js.map