"use strict";(self["webpackChunklenovo_shopping"]=self["webpackChunklenovo_shopping"]||[]).push([[492],{5492:function(t,e,o){o.r(e),o.d(e,{default:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"card",staticStyle:{padding:"15px"}},[t._v(" 您好，"+t._s(t.user?.name)+"！欢迎使用联想后台管理系统！ ")]),e("div",{staticStyle:{display:"flex",margin:"10px 0"}},[e("div",{staticClass:"card",staticStyle:{width:"50%"}},[e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"30px"}},[e("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._v("公告列表 "),e("span",{staticStyle:{"font-size":"12px",color:"#888","margin-left":"8px"}},[t._v("("+t._s(t.notices.length)+")")])]),e("div",[!t.user||"ADMIN"!==t.user.role&&"BUSINESS"!==t.user.role?t._e():e("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.openAddNotice}},[t._v("新增公告")])],1)]),e("div",[e("el-timeline",{attrs:{slot:"reference",reverse:""},slot:"reference"},[t.notices&&t.notices.length?t._l(t.notices,(function(o){return e("el-timeline-item",{key:o.id,attrs:{timestamp:o.time}},[e("el-popover",{attrs:{placement:"right",width:"260",trigger:"hover"}},[e("div",{staticStyle:{"font-weight":"600"}},[t._v(t._s(o.title))]),e("div",{staticStyle:{"margin-top":"6px"}},[t._v(t._s(o.content))]),e("div",{staticStyle:{"margin-top":"8px",color:"#888","font-size":"12px"}},[t._v("发布者："+t._s(o.user)+"    发布时间："+t._s(o.time))]),e("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(o.title))])])],1)})):[e("div",{staticStyle:{color:"#999",padding:"12px"}},[t._v("暂无公告")])]],2)],1)])]),e("el-dialog",{attrs:{title:"新增公告",visible:t.showAddNotice,width:"520px","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(e){t.showAddNotice=e}}},[e("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"标题",prop:"title"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.addForm.title,callback:function(e){t.$set(t.addForm,"title",e)},expression:"addForm.title"}})],1),e("el-form-item",{attrs:{label:"内容",prop:"content"}},[e("el-input",{attrs:{type:"textarea",rows:6,autocomplete:"off"},model:{value:t.addForm.content,callback:function(e){t.$set(t.addForm,"content",e)},expression:"addForm.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.showAddNotice=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.submitAddNotice}},[t._v("保存")])],1)],1)],1)},s=[],l={name:"Home",data(){return{user:JSON.parse(localStorage.getItem("xm-user")||"{}"),notices:[],showAddNotice:!1,addForm:{title:"",content:""},addFormRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]}}},created(){this.$request.get("/notice/selectAll").then((t=>{this.notices=t.data||[]}))},methods:{openAddNotice(){this.addForm={title:"",content:""},this.showAddNotice=!0},submitAddNotice(){this.$refs.addFormRef.validate((t=>{t&&this.$request.post("/notice/add",this.addForm).then((t=>{"200"===t.code?(this.$message.success("公告新增成功"),this.showAddNotice=!1,this.$request.get("/notice/selectAll").then((t=>{this.notices=t.data||[];try{localStorage.setItem("noticeUpdate",Date.now())}catch(e){}}))):this.$message.error(t.msg||"新增失败")}))}))}}},r=l,a=o(1656),n=(0,a.A)(r,i,s,!1,null,null,null),d=n.exports}}]);
//# sourceMappingURL=492.df58cdd8.js.map