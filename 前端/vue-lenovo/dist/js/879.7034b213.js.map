{"version":3,"file":"js/879.7034b213.js","mappings":"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","sources":["webpack://lenovo_shopping/./src/views/front/Cart.vue","webpack://lenovo_shopping/src/views/front/Cart.vue","webpack://lenovo_shopping/./src/views/front/Cart.vue?92cd","webpack://lenovo_shopping/./src/views/front/Cart.vue?c9c5"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main-content\"},[_c('div',{staticStyle:{\"width\":\"70%\",\"background-color\":\"white\",\"margin\":\"30px auto\",\"border-radius\":\"20px\"}},[_c('div',{staticStyle:{\"padding-bottom\":\"10px\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"font-size\":\"18px\",\"color\":\"#000000FF\",\"line-height\":\"80px\",\"border-bottom\":\"#cccccc 1px solid\"}},[_c('div',{staticStyle:{\"margin-left\":\"20px\",\"flex\":\"1\"}},[_vm._v(\"全部商品（\"+_vm._s(_vm.goodsData.length)+\"件）\")]),_c('div',{staticStyle:{\"flex\":\"2\",\"text-align\":\"right\",\"display\":\"flex\",\"align-items\":\"center\",\"gap\":\"8px\",\"justify-content\":\"flex-end\"}},[_c('el-select',{staticStyle:{\"width\":\"60%\"},attrs:{\"placeholder\":\"请选择收货地址\"},model:{value:(_vm.addressId),callback:function ($$v) {_vm.addressId=$$v},expression:\"addressId\"}},_vm._l((_vm.addressData),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.username + ' - ' + item.useraddress + ' - ' + item.phone,\"value\":item.id}})}),1),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.openQuickAdd}},[_vm._v(\"快速新增\")]),_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"mini\"},on:{\"click\":_vm.openAddress}},[_vm._v(\"管理地址\")])],1),_c('div',{staticStyle:{\"flex\":\"1\",\"font-size\":\"16px\",\"text-align\":\"right\",\"padding-right\":\"20px\"}},[_vm._v(\" 已选商品 ￥ \"+_vm._s(_vm.totalPrice)+\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"round\":\"\"},on:{\"click\":_vm.pay}},[_vm._v(\"下单\")])],1)]),_c('div',{staticStyle:{\"margin\":\"20px 0\",\"padding\":\"0 50px\"}},[_c('div',{staticClass:\"table\"},[_c('el-table',{attrs:{\"data\":_vm.goodsData,\"strip\":\"\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"商品图片\",\"width\":\"120px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.goodsImg)?_c('el-image',{staticStyle:{\"width\":\"80px\",\"height\":\"60px\",\"border-radius\":\"3px\"},attrs:{\"src\":scope.row.goodsImg,\"preview-src-list\":[scope.row.goodsImg]}}):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"prop\":\"goodsName\",\"label\":\"商品名称\",\"width\":\"240px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('a',{attrs:{\"href\":'/front/detail?id=' + scope.row.goodsId}},[_vm._v(_vm._s(scope.row.goodsName))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"businessName\",\"label\":\"店铺名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('a',{attrs:{\"href\":'/front/business?id=' + scope.row.businessId}},[_vm._v(_vm._s(scope.row.businessName))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"goodsPrice\",\"label\":\"商品价格\"}}),_c('el-table-column',{attrs:{\"prop\":\"num\",\"label\":\"选择数量\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input-number',{staticStyle:{\"width\":\"100px\"},attrs:{\"min\":1},on:{\"change\":function($event){return _vm.handleChange(scope.row)}},model:{value:(scope.row.num),callback:function ($$v) {_vm.$set(scope.row, \"num\", $$v)},expression:\"scope.row.num\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.del(scope.row.id)}}},[_vm._v(\"移除购物车\")])]}}])})],1),_c('div',{staticClass:\"pagination\",staticStyle:{\"margin-top\":\"20px\"}},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.pageNum,\"page-sizes\":[5, 10, 20],\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next\",\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChange}})],1)],1)])])]),_c('el-dialog',{attrs:{\"title\":\"新增地址\",\"visible\":_vm.addressDialogVisible,\"width\":\"40%\",\"close-on-click-modal\":false,\"destroy-on-close\":\"\"},on:{\"update:visible\":function($event){_vm.addressDialogVisible=$event}}},[_c('el-form',{ref:\"addressFormRef\",staticStyle:{\"padding-right\":\"50px\"},attrs:{\"model\":_vm.addressForm,\"rules\":_vm.addressRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"prop\":\"username\",\"label\":\"收货人\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.addressForm.username),callback:function ($$v) {_vm.$set(_vm.addressForm, \"username\", $$v)},expression:\"addressForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"useraddress\",\"label\":\"收货地址\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.addressForm.useraddress),callback:function ($$v) {_vm.$set(_vm.addressForm, \"useraddress\", $$v)},expression:\"addressForm.useraddress\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"phone\",\"label\":\"联系电话\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.addressForm.phone),callback:function ($$v) {_vm.$set(_vm.addressForm, \"phone\", $$v)},expression:\"addressForm.phone\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addressDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveAddress}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"main-content\">\r\n    <div style=\"width: 70%; background-color: white; margin: 30px auto; border-radius: 20px\">\r\n      <div style=\"padding-bottom: 10px\">\r\n        <div style=\"display: flex; font-size: 18px; color: #000000FF; line-height: 80px; border-bottom: #cccccc 1px solid;\">\r\n          <div style=\"margin-left: 20px; flex: 1\">全部商品（{{ goodsData.length }}件）</div>\r\n          <div style=\"flex: 2; text-align: right; display:flex; align-items:center; gap:8px; justify-content:flex-end\">\r\n            <el-select v-model=\"addressId\" placeholder=\"请选择收货地址\" style=\"width: 60%\">\r\n              <el-option v-for=\"(item, index) in addressData\" :label=\"item.username + ' - ' + item.useraddress + ' - ' + item.phone\" :value=\"item.id\" :key=\"index\"></el-option>\r\n            </el-select>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"openQuickAdd\">快速新增</el-button>\r\n            <el-button type=\"warning\" size=\"mini\" @click=\"openAddress\">管理地址</el-button>\r\n          </div>\r\n          <div style=\"flex: 1; font-size: 16px; text-align: right; padding-right: 20px\">\r\n            已选商品 ￥ {{totalPrice}} <el-button type=\"danger\" round @click=\"pay\">下单</el-button>\r\n          </div>\r\n        </div>\r\n        <div style=\"margin: 20px 0; padding: 0 50px\">\r\n          <div class=\"table\">\r\n            <el-table :data=\"goodsData\" strip @selection-change=\"handleSelectionChange\">\r\n              <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\r\n              <el-table-column label=\"商品图片\" width=\"120px\">\r\n                <template v-slot=\"scope\">\r\n                  <el-image style=\"width: 80px; height: 60px; border-radius: 3px\" v-if=\"scope.row.goodsImg\"\r\n                            :src=\"scope.row.goodsImg\" :preview-src-list=\"[scope.row.goodsImg]\"></el-image>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column prop=\"goodsName\" label=\"商品名称\" width=\"240px\">\r\n                <template v-slot=\"scope\">\r\n                  <a :href=\"'/front/detail?id=' + scope.row.goodsId\">{{scope.row.goodsName}}</a>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column prop=\"businessName\" label=\"店铺名称\">\r\n                <template v-slot=\"scope\">\r\n                  <a :href=\"'/front/business?id=' + scope.row.businessId\">{{scope.row.businessName}}</a>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column prop=\"goodsPrice\" label=\"商品价格\"></el-table-column>\r\n              <el-table-column prop=\"num\" label=\"选择数量\">\r\n                <template v-slot=\"scope\">\r\n                  <el-input-number v-model=\"scope.row.num\" style=\"width: 100px\" @change=\"handleChange(scope.row)\" :min=\"1\"></el-input-number>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"操作\" align=\"center\" width=\"180\">\r\n                <template v-slot=\"scope\">\r\n                  <el-button size=\"mini\" type=\"danger\" plain @click=\"del(scope.row.id)\">移除购物车</el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n\r\n            <div class=\"pagination\" style=\"margin-top: 20px\">\r\n              <el-pagination\r\n                  background\r\n                  @current-change=\"handleCurrentChange\"\r\n                  :current-page=\"pageNum\"\r\n                  :page-sizes=\"[5, 10, 20]\"\r\n                  :page-size=\"pageSize\"\r\n                  layout=\"total, prev, pager, next\"\r\n                  :total=\"total\">\r\n              </el-pagination>\r\n            </div>\r\n            </div>\r\n            </div>\r\n            </div>\r\n            </div>\r\n          <!-- 快速新增地址弹窗 -->\r\n  <el-dialog title=\"新增地址\" :visible.sync=\"addressDialogVisible\" width=\"40%\" :close-on-click-modal=\"false\" destroy-on-close>\r\n    <el-form :model=\"addressForm\" :rules=\"addressRules\" ref=\"addressFormRef\" label-width=\"100px\" style=\"padding-right: 50px\">\r\n      <el-form-item prop=\"username\" label=\"收货人\">\r\n        <el-input v-model=\"addressForm.username\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"useraddress\" label=\"收货地址\">\r\n        <el-input v-model=\"addressForm.useraddress\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"phone\" label=\"联系电话\">\r\n        <el-input v-model=\"addressForm.phone\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"addressDialogVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"saveAddress\">确 定</el-button>\r\n    </div>\r\n  </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n\r\n  data() {\r\n    return {\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n      goodsData: [],\r\n      pageNum: 1,   // 当前的页码\r\n      pageSize: 10,  // 每页显示的个数\r\n      totalPrice: 0,\r\n      total: 0,\r\n      addressId: null,\r\n      addressData: [],\r\n      selectedData: [],\r\n      // 快速新增地址弹窗相关\r\n      addressDialogVisible: false,\r\n      addressForm: {\r\n        id: null,\r\n        userId: null,\r\n        username: '',\r\n        useraddress: '',\r\n        phone: ''\r\n      },\r\n      addressRules: {\r\n        username: [ { required: true, message: '请输入收货人', trigger: 'blur' } ],\r\n        useraddress: [ { required: true, message: '请输入收货地址', trigger: 'blur' } ],\r\n        phone: [ { required: true, message: '请输入联系电话', trigger: 'blur' } ]\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadGoods(1)\r\n    this.loadAddress()\r\n  },\r\n  // methods：本页面所有的点击事件或者其他函数定义区\r\n  methods: {\r\n    loadAddress() {\r\n      // 返回 Promise 以便调用方能链式处理（例如保存后刷新并选择新地址）\r\n      return this.$request.get('/address/selectAll', { params: { userId: this.user?.id } }).then(res => {\r\n        if (res.code === '200') {\r\n          this.addressData = res.data || []\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n        return res\r\n      })\r\n    },\r\n    openAddress() {\r\n      this.$router.push('/front/address')\r\n    },\r\n    openQuickAdd() {\r\n      this.addressForm = {\r\n        id: null,\r\n        userId: this.user?.id || null,\r\n        username: '',\r\n        useraddress: '',\r\n        phone: ''\r\n      }\r\n      this.addressDialogVisible = true\r\n    },\r\n    saveAddress() {\r\n      this.$refs.addressFormRef.validate(valid => {\r\n        if (!valid) return\r\n        if (!this.user || !this.user.id) {\r\n          this.$message.error('请先登录');\r\n          this.$router.push('/login');\r\n          return;\r\n        }\r\n        // 提交新增地址\r\n        const payload = Object.assign({}, this.addressForm)\r\n        // 确保有 userId\r\n        payload.userId = this.user?.id\r\n        this.$request.post('/address/add', payload).then(res => {\r\n          if (res.code === '200') {\r\n            this.$message({ message: '保存成功', type: 'success', duration: 1200 })\r\n            // 如果后端返回了插入的 address（含 id），直接选中并关闭对话框\r\n            if (res.data && res.data.id) {\r\n              // 先刷新列表，再设置选中的 addressId\r\n              this.loadAddress().then(() => {\r\n                this.addressId = res.data.id\r\n                this.addressDialogVisible = false\r\n              })\r\n            } else {\r\n              // 回退策略：通过字段匹配找到新增地址\r\n              this.loadAddress().then(() => {\r\n                const found = this.addressData.find(a => a.useraddress === payload.useraddress && a.phone === payload.phone)\r\n                if (found) this.addressId = found.id\r\n                this.addressDialogVisible = false\r\n              })\r\n            }\r\n          } else {\r\n            this.$message.error(res.msg)\r\n          }\r\n        }).catch(err => {\r\n          console.error('saveAddress error:', err)\r\n          this.$message.error('保存失败，请检查网络或稍后重试')\r\n        })\r\n      })\r\n    },\r\n    loadGoods(pageNum) {\r\n      if (pageNum) this.pageNum = pageNum\r\n      this.$request.get('/cart/selectPage', {\r\n        params: {\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n        }\r\n      }).then(res => {\r\n        if (res.code === '200') {\r\n          this.goodsData = res.data?.list\r\n          this.total = res.data?.total\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n    navTo(url) {\r\n      location.href = url\r\n    },\r\n    del(id) {\r\n      this.$request.delete('/cart/delete/' + id).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message({ message: '移除成功', type: 'success', duration: 1000 })\r\n          this.loadGoods(1)\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n    handleCurrentChange(pageNum) {\r\n      this.loadGoods(pageNum)\r\n    },\r\n    handleSelectionChange(rows) {\r\n      this.totalPrice = 0\r\n      this.selectedData = rows\r\n      this.selectedData.forEach(item => {\r\n        this.totalPrice += (item.goodsPrice * item.num)\r\n      })\r\n    },\r\n    handleChange(row) {\r\n      this.totalPrice = 0\r\n      this.selectedData.forEach(item => {\r\n        this.totalPrice += item.goodsPrice * item.num\r\n      })\r\n    },\r\n    pay() {\r\n      if (!this.addressId) {\r\n        this.$message.warning('请选择收货地址')\r\n        return\r\n      }\r\n      if (!this.selectedData || this.selectedData.length === 0) {\r\n        this.$message.warning('请选择商品')\r\n        return\r\n      }\r\n      let data = {\r\n        userId: this.user.id,\r\n        addressId: this.addressId,\r\n        status: '待发货',\r\n        cartData: this.selectedData\r\n      }\r\n      this.$request.post('/orders/add', data).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success('操作成功')\r\n          this.loadGoods(1)\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=75e89352\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","_v","_s","goodsData","length","attrs","model","value","addressId","callback","$$v","expression","_l","addressData","item","index","key","username","useraddress","phone","id","on","openQuickAdd","openAddress","totalPrice","pay","handleSelectionChange","scopedSlots","_u","fn","scope","row","goodsImg","_e","goodsId","goodsName","businessId","businessName","$event","handleChange","num","$set","del","pageNum","pageSize","total","handleCurrentChange","addressDialogVisible","ref","addressForm","addressRules","slot","saveAddress","staticRenderFns","data","user","JSON","parse","localStorage","getItem","selectedData","userId","required","message","trigger","mounted","loadGoods","loadAddress","methods","$request","get","params","then","res","code","$message","error","msg","$router","push","$refs","addressFormRef","validate","valid","payload","Object","assign","post","type","duration","found","find","a","catch","err","console","list","navTo","url","location","href","delete","rows","forEach","goodsPrice","warning","status","cartData","success","component"],"sourceRoot":""}